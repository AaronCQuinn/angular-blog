{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { Subscription } from 'rxjs';\nlet BlogViewComponent = class BlogViewComponent {\n  constructor(route, blogsService, authService) {\n    this.route = route;\n    this.blogsService = blogsService;\n    this.authService = authService;\n    this.showForm = false;\n    this.blogId = '';\n    this.comments = [];\n    this.formData = {\n      content: '',\n      postedBy: ''\n    };\n    this.userSubscription = new Subscription();\n  }\n  ngOnInit() {\n    const blogId = this.route.snapshot.paramMap.get('blogId') ?? '';\n    if (blogId) {\n      this.blogId = blogId;\n      this.blogsService.getBlog(blogId).subscribe(blog => {\n        this.blog = blog;\n      });\n      this.blogsService.getComments(blogId).subscribe(comment => {\n        this.comments = comment;\n      });\n    }\n    this.userSubscription = this.authService.user$.subscribe(() => {\n      this.setPostedBy();\n    });\n    this.blogsService.newBlogAdded$.subscribe(blog => {\n      return;\n    });\n  }\n  setPostedBy() {\n    const user = this.authService.getUser();\n    if (user) {\n      return this.formData.postedBy = user.username;\n    }\n    return;\n  }\n  onFormChange(event) {\n    const {\n      name,\n      value\n    } = event.target;\n    if (name in this.formData) {\n      this.formData = {\n        ...this.formData,\n        [name]: value.trim()\n      };\n    }\n  }\n  toggleForm() {\n    this.showForm = !this.showForm;\n  }\n  submitComment() {\n    this.blogsService.submitComment(this.formData, this.blogId).subscribe(comment => {\n      this.comments.unshift(comment);\n    });\n    this.formData.content = '';\n  }\n};\nBlogViewComponent = __decorate([Component({\n  selector: 'app-blog-view',\n  templateUrl: './blog-view.component.html',\n  styleUrls: ['./blog-view.component.css']\n})], BlogViewComponent);\nexport { BlogViewComponent };","map":{"version":3,"mappings":";AAAA,SAASA,SAAS,QAAgB,eAAe;AAIjD,SAASC,YAAY,QAAQ,MAAM;AAU5B,IAAMC,iBAAiB,GAAvB,MAAMA,iBAAiB;EAW5BC,YAAoBC,KAAqB,EAAUC,YAA0B,EAAUC,WAAwB;IAA3F,UAAK,GAALF,KAAK;IAA0B,iBAAY,GAAZC,YAAY;IAAwB,gBAAW,GAAXC,WAAW;IAVlG,aAAQ,GAAY,KAAK;IACzB,WAAM,GAAW,EAAE;IAGnB,aAAQ,GAAc,EAAE;IACxB,aAAQ,GAAG;MACTC,OAAO,EAAE,EAAE;MACXC,QAAQ,EAAE;KACX;IAGC,IAAI,CAACC,gBAAgB,GAAG,IAAIR,YAAY,EAAE;EAC5C;EAEAS,QAAQ;IACN,MAAMC,MAAM,GAAG,IAAI,CAACP,KAAK,CAACQ,QAAQ,CAACC,QAAQ,CAACC,GAAG,CAAC,QAAQ,CAAC,IAAI,EAAE;IAC/D,IAAIH,MAAM,EAAE;MACV,IAAI,CAACA,MAAM,GAAGA,MAAM;MACpB,IAAI,CAACN,YAAY,CAACU,OAAO,CAACJ,MAAM,CAAC,CAACK,SAAS,CAAEC,IAAU,IAAI;QACzD,IAAI,CAACA,IAAI,GAAGA,IAAI;MAClB,CAAC,CAAC;MACF,IAAI,CAACZ,YAAY,CAACa,WAAW,CAACP,MAAM,CAAC,CAACK,SAAS,CAAEG,OAAO,IAAI;QAC1D,IAAI,CAACC,QAAQ,GAAGD,OAAO;MACzB,CAAC,CAAC;;IAGJ,IAAI,CAACV,gBAAgB,GAAG,IAAI,CAACH,WAAW,CAACe,KAAK,CAACL,SAAS,CAAC,MAAK;MAC5D,IAAI,CAACM,WAAW,EAAE;IACpB,CAAC,CAAC;IAEF,IAAI,CAACjB,YAAY,CAACkB,aAAa,CAACP,SAAS,CAAEC,IAAI,IAAI;MACjD;IACF,CAAC,CAAC;EACJ;EAEAK,WAAW;IACT,MAAME,IAAI,GAAG,IAAI,CAAClB,WAAW,CAACmB,OAAO,EAAE;IACvC,IAAID,IAAI,EAAE;MACR,OAAO,IAAI,CAACE,QAAQ,CAAClB,QAAQ,GAAGgB,IAAI,CAACG,QAAQ;;IAG/C;EACF;EAEAC,YAAY,CAACC,KAAU;IACrB,MAAM;MAAEC,IAAI;MAAEC;IAAK,CAAE,GAAGF,KAAK,CAACG,MAAM;IACpC,IAAIF,IAAI,IAAI,IAAI,CAACJ,QAAQ,EAAE;MACzB,IAAI,CAACA,QAAQ,GAAG;QAAE,GAAG,IAAI,CAACA,QAAQ;QAAE,CAACI,IAAI,GAAGC,KAAK,CAACE,IAAI;MAAE,CAAE;;EAE9D;EAEAC,UAAU;IACR,IAAI,CAACC,QAAQ,GAAG,CAAC,IAAI,CAACA,QAAQ;EAChC;EAEAC,aAAa;IACX,IAAI,CAAC/B,YAAY,CAAC+B,aAAa,CAAC,IAAI,CAACV,QAAQ,EAAE,IAAI,CAACf,MAAM,CAAC,CAACK,SAAS,CAAEG,OAAO,IAAI;MAChF,IAAI,CAACC,QAAQ,CAACiB,OAAO,CAAClB,OAAO,CAAC;IAChC,CAAC,CAAC;IAEF,IAAI,CAACO,QAAQ,CAACnB,OAAO,GAAG,EAAE;EAC5B;CACD;AA/DYL,iBAAiB,eAN7BF,SAAS,CAAC;EACTsC,QAAQ,EAAE,eAAe;EACzBC,WAAW,EAAE,4BAA4B;EACzCC,SAAS,EAAE,CAAC,2BAA2B;CACxC,CAAC,GAEWtC,iBAAiB,CA+D7B;SA/DYA,iBAAiB","names":["Component","Subscription","BlogViewComponent","constructor","route","blogsService","authService","content","postedBy","userSubscription","ngOnInit","blogId","snapshot","paramMap","get","getBlog","subscribe","blog","getComments","comment","comments","user$","setPostedBy","newBlogAdded$","user","getUser","formData","username","onFormChange","event","name","value","target","trim","toggleForm","showForm","submitComment","unshift","selector","templateUrl","styleUrls"],"sourceRoot":"","sources":["C:\\Users\\aaron\\Desktop\\angular-blog\\src\\app\\pages\\blog-view\\blog-view.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { BlogsService } from '../../services/blogs.service';\nimport { Blog } from 'src/app/Blog';\nimport { Subscription } from 'rxjs'\nimport { AuthService } from 'src/app/services/auth-service.service';\nimport { Comment } from 'src/app/Comment';\n\n@Component({\n  selector: 'app-blog-view',\n  templateUrl: './blog-view.component.html',\n  styleUrls: ['./blog-view.component.css']\n})\n\nexport class BlogViewComponent implements OnInit {\n  showForm: boolean = false;\n  blogId: string = '';\n  private userSubscription: Subscription;\n  blog: Blog | undefined;\n  comments: Comment[] = [];\n  formData = {\n    content: '',\n    postedBy: '',\n  }\n\n  constructor(private route: ActivatedRoute, private blogsService: BlogsService, private authService: AuthService) {\n    this.userSubscription = new Subscription();\n  }\n  \n  ngOnInit(): void {\n    const blogId = this.route.snapshot.paramMap.get('blogId') ?? '';\n    if (blogId) {\n      this.blogId = blogId;\n      this.blogsService.getBlog(blogId).subscribe((blog: Blog) => {\n        this.blog = blog;\n      });\n      this.blogsService.getComments(blogId).subscribe((comment) => {\n        this.comments = comment;\n      });\n    }\n\n    this.userSubscription = this.authService.user$.subscribe(() => {          \n      this.setPostedBy();\n    });\n\n    this.blogsService.newBlogAdded$.subscribe((blog) => {\n      return;\n    });\n  }\n\n  setPostedBy() {\n    const user = this.authService.getUser();\n    if (user) {\n      return this.formData.postedBy = user.username;\n    }\n\n    return;\n  }\n\n  onFormChange(event: any) {\n    const { name, value } = event.target;\n    if (name in this.formData) {\n      this.formData = { ...this.formData, [name]: value.trim() };\n    }\n  }\n\n  toggleForm() {\n    this.showForm = !this.showForm;\n  }\n\n  submitComment() {        \n    this.blogsService.submitComment(this.formData, this.blogId).subscribe((comment) => {\n      this.comments.unshift(comment);\n    });\n\n    this.formData.content = '';\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}