{"ast":null,"code":"import { Subscription } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../../services/blogs.service\";\nimport * as i3 from \"src/app/services/auth-service.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\nfunction BlogViewComponent_div_16_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 9)(1, \"form\", 10);\n    i0.ɵɵlistener(\"ngSubmit\", function BlogViewComponent_div_16_Template_form_ngSubmit_1_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.submitComment());\n    });\n    i0.ɵɵelementStart(2, \"label\", 11);\n    i0.ɵɵtext(3, \" Alias: \");\n    i0.ɵɵelementStart(4, \"input\", 12);\n    i0.ɵɵlistener(\"change\", function BlogViewComponent_div_16_Template_input_change_4_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.onFormChange($event));\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"textarea\", 13);\n    i0.ɵɵlistener(\"change\", function BlogViewComponent_div_16_Template_textarea_change_5_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.onFormChange($event));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"button\", 14);\n    i0.ɵɵtext(7, \" Submit Comment \");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"value\", ctx_r0.formData.postedBy);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabled\", !ctx_r0.formData.postedBy)(\"title\", ctx_r0.formData.postedBy === \"\" ? \"Please sign in on the main page to leave a comment.\" : \"\");\n  }\n}\nfunction BlogViewComponent_div_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 1)(1, \"div\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const comment_r6 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Posted by: \", comment_r6.postedBy, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(comment_r6.createdAt);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(comment_r6.content);\n  }\n}\nexport class BlogViewComponent {\n  constructor(route, blogsService, authService) {\n    this.route = route;\n    this.blogsService = blogsService;\n    this.authService = authService;\n    this.showForm = false;\n    this.blogId = '';\n    this.comments = [];\n    this.formData = {\n      content: '',\n      postedBy: ''\n    };\n    this.userSubscription = new Subscription();\n  }\n  ngOnInit() {\n    const blogId = this.route.snapshot.paramMap.get('blogId') ?? '';\n    if (blogId) {\n      this.blogId = blogId;\n      this.blogsService.getBlog(blogId).subscribe(blog => {\n        console.log(blog);\n        this.blog = blog;\n      });\n      this.blogsService.getComments(blogId).subscribe(comment => {\n        this.comments = comment;\n      });\n    }\n    this.userSubscription = this.authService.user$.subscribe(() => {\n      this.setPostedBy();\n    });\n  }\n  setPostedBy() {\n    const user = this.authService.getUser();\n    if (user) {\n      return this.formData.postedBy = user;\n    }\n    return;\n  }\n  onFormChange(event) {\n    const {\n      name,\n      value\n    } = event.target;\n    if (name in this.formData) {\n      this.formData = {\n        ...this.formData,\n        [name]: value.trim()\n      };\n    }\n  }\n  toggleForm() {\n    this.showForm = !this.showForm;\n  }\n  submitComment() {\n    console.log('hit');\n    this.blogsService.submitComment(this.formData, this.blogId).subscribe(blog => {\n      console.log(blog);\n    });\n  }\n}\nBlogViewComponent.ɵfac = function BlogViewComponent_Factory(t) {\n  return new (t || BlogViewComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.BlogsService), i0.ɵɵdirectiveInject(i3.AuthService));\n};\nBlogViewComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: BlogViewComponent,\n  selectors: [[\"app-blog-view\"]],\n  decls: 20,\n  vars: 6,\n  consts: [[1, \"blog_view__container\"], [1, \"blog__blog\"], [1, \"blog__header__container\"], [1, \"blog__header\"], [1, \"blog__add_comment\", 3, \"click\"], [\"class\", \"blog__form__container\", 4, \"ngIf\"], [1, \"blog__comments__container\"], [1, \"blog__commentItem\"], [\"class\", \"blog__blog\", 4, \"ngFor\", \"ngForOf\"], [1, \"blog__form__container\"], [1, \"blog__form\", 3, \"ngSubmit\"], [\"for\", \"postedBy\"], [\"type\", \"text\", \"name\", \"postedBy\", \"id\", \"postedBy\", \"maxlength\", \"25\", \"required\", \"\", \"disabled\", \"\", 1, \"blogpostform__titleInput\", 3, \"value\", \"change\"], [\"name\", \"content\", \"id\", \"content\", \"placeholder\", \"Your blog's text...\", \"maxlength\", \"500\", \"required\", \"\", 1, \"blogpostform__textInput\", 3, \"change\"], [\"type\", \"submit\", 1, \"blog__form__button\", 3, \"disabled\", \"title\"]],\n  template: function BlogViewComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h2\");\n      i0.ɵɵtext(3);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"div\");\n      i0.ɵɵtext(5);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"div\");\n      i0.ɵɵtext(7);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"p\");\n      i0.ɵɵtext(9);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(10, \"div\", 2)(11, \"div\", 3)(12, \"span\");\n      i0.ɵɵtext(13, \"Comments\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(14, \"span\", 4);\n      i0.ɵɵlistener(\"click\", function BlogViewComponent_Template_span_click_14_listener() {\n        return ctx.toggleForm();\n      });\n      i0.ɵɵtext(15, \"Add a comment\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵtemplate(16, BlogViewComponent_div_16_Template, 8, 3, \"div\", 5);\n      i0.ɵɵelementStart(17, \"div\", 6)(18, \"div\", 7);\n      i0.ɵɵtemplate(19, BlogViewComponent_div_19_Template, 7, 3, \"div\", 8);\n      i0.ɵɵelementEnd()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate(ctx.blog.title);\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate1(\"Posted by: \", ctx.blog.postedBy, \"\");\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate(ctx.blog.createdAt);\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate(ctx.blog.content);\n      i0.ɵɵadvance(7);\n      i0.ɵɵproperty(\"ngIf\", ctx.showForm);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngForOf\", ctx.comments);\n    }\n  },\n  dependencies: [i4.NgForOf, i4.NgIf, i5.ɵNgNoValidate, i5.NgControlStatusGroup, i5.NgForm],\n  styles: [\".blog_view__container[_ngcontent-%COMP%] {\\r\\n    display: flex;\\r\\n    justify-content: center;\\r\\n    align-items: center;\\r\\n    margin-top: var(--spacing);\\r\\n}\\r\\n\\r\\n.blog__blog[_ngcontent-%COMP%] {\\r\\n    display: flex;\\r\\n    flex-direction: column;\\r\\n    border: 1px solid black;\\r\\n    padding: var(--spacing);\\r\\n    gap: 3px;\\r\\n    width: 50%;\\r\\n    align-self: start;\\r\\n    margin-bottom: var(--spacing);\\r\\n}\\r\\n\\r\\n.blog__blog[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\\r\\n    padding-top: var(--spacing);\\r\\n}\\r\\n\\r\\n.blog__header__container[_ngcontent-%COMP%] {\\r\\n    display: flex;\\r\\n    align-items: center;\\r\\n    justify-content: center;\\r\\n}\\r\\n\\r\\n.blog__header[_ngcontent-%COMP%] {\\r\\n    display: flex;\\r\\n    justify-content: space-between;\\r\\n    width: 50%;\\r\\n}\\r\\n\\r\\n.blog__add_comment[_ngcontent-%COMP%] {\\r\\n    text-decoration: underline;\\r\\n    cursor: pointer;\\r\\n    -webkit-user-select: none;\\r\\n            user-select: none;\\r\\n}\\r\\n\\r\\n.blog__form__container[_ngcontent-%COMP%] {\\r\\n    display: flex;\\r\\n    flex-direction: column;\\r\\n    align-items: center;\\r\\n    justify-content: center;\\r\\n}\\r\\n\\r\\n.blog__form[_ngcontent-%COMP%] {\\r\\n    margin-top: var(--spacing);\\r\\n    display: flex;\\r\\n    flex-direction: column;\\r\\n    width: 50%;\\r\\n    gap: var(--spacing);\\r\\n}\\r\\n\\r\\n.blog__form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%] {\\r\\n    resize: none;\\r\\n    width: 100%;\\r\\n    height: 100px;\\r\\n    padding: 5px;\\r\\n}\\r\\n\\r\\n.blog__form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] {\\r\\n    padding: 3px;\\r\\n    border: none;\\r\\n    border-bottom: 1px solid black;\\r\\n}\\r\\n\\r\\n.blog__form__button[_ngcontent-%COMP%] {\\r\\n    font-size: 1.15em;\\r\\n    padding: calc(var(--spacing) / 2);\\r\\n    background-color: white;\\r\\n    font-family: 'Inconsolata', sans-serif;\\r\\n    font-weight: 600;\\r\\n    letter-spacing: 1px;\\r\\n}\\r\\n\\r\\n.blog__form__button[_ngcontent-%COMP%]:disabled {\\r\\n    font-size: 1.15em;\\r\\n    padding: calc(var(--spacing) / 2);\\r\\n    background-color: white;\\r\\n    font-family: 'Inconsolata', sans-serif;\\r\\n    font-weight: 600;\\r\\n    letter-spacing: 1px;\\r\\n    background-color: lightgray;\\r\\n}\\r\\n\\r\\n.blog__comments__container[_ngcontent-%COMP%] {\\r\\n    display: flex;\\r\\n    justify-content: center;\\r\\n    margin-top: var(--spacing);\\r\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvcGFnZXMvYmxvZy12aWV3L2Jsb2ctdmlldy5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0lBQ0ksYUFBYTtJQUNiLHVCQUF1QjtJQUN2QixtQkFBbUI7SUFDbkIsMEJBQTBCO0FBQzlCOztBQUVBO0lBQ0ksYUFBYTtJQUNiLHNCQUFzQjtJQUN0Qix1QkFBdUI7SUFDdkIsdUJBQXVCO0lBQ3ZCLFFBQVE7SUFDUixVQUFVO0lBQ1YsaUJBQWlCO0lBQ2pCLDZCQUE2QjtBQUNqQzs7QUFFQTtJQUNJLDJCQUEyQjtBQUMvQjs7QUFFQTtJQUNJLGFBQWE7SUFDYixtQkFBbUI7SUFDbkIsdUJBQXVCO0FBQzNCOztBQUVBO0lBQ0ksYUFBYTtJQUNiLDhCQUE4QjtJQUM5QixVQUFVO0FBQ2Q7O0FBRUE7SUFDSSwwQkFBMEI7SUFDMUIsZUFBZTtJQUNmLHlCQUFpQjtZQUFqQixpQkFBaUI7QUFDckI7O0FBRUE7SUFDSSxhQUFhO0lBQ2Isc0JBQXNCO0lBQ3RCLG1CQUFtQjtJQUNuQix1QkFBdUI7QUFDM0I7O0FBRUE7SUFDSSwwQkFBMEI7SUFDMUIsYUFBYTtJQUNiLHNCQUFzQjtJQUN0QixVQUFVO0lBQ1YsbUJBQW1CO0FBQ3ZCOztBQUVBO0lBQ0ksWUFBWTtJQUNaLFdBQVc7SUFDWCxhQUFhO0lBQ2IsWUFBWTtBQUNoQjs7QUFFQTtJQUNJLFlBQVk7SUFDWixZQUFZO0lBQ1osOEJBQThCO0FBQ2xDOztBQUVBO0lBQ0ksaUJBQWlCO0lBQ2pCLGlDQUFpQztJQUNqQyx1QkFBdUI7SUFDdkIsc0NBQXNDO0lBQ3RDLGdCQUFnQjtJQUNoQixtQkFBbUI7QUFDdkI7O0FBRUE7SUFDSSxpQkFBaUI7SUFDakIsaUNBQWlDO0lBQ2pDLHVCQUF1QjtJQUN2QixzQ0FBc0M7SUFDdEMsZ0JBQWdCO0lBQ2hCLG1CQUFtQjtJQUNuQiwyQkFBMkI7QUFDL0I7O0FBRUE7SUFDSSxhQUFhO0lBQ2IsdUJBQXVCO0lBQ3ZCLDBCQUEwQjtBQUM5QiIsInNvdXJjZXNDb250ZW50IjpbIi5ibG9nX3ZpZXdfX2NvbnRhaW5lciB7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XHJcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gICAgbWFyZ2luLXRvcDogdmFyKC0tc3BhY2luZyk7XHJcbn1cclxuXHJcbi5ibG9nX19ibG9nIHtcclxuICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xyXG4gICAgYm9yZGVyOiAxcHggc29saWQgYmxhY2s7XHJcbiAgICBwYWRkaW5nOiB2YXIoLS1zcGFjaW5nKTtcclxuICAgIGdhcDogM3B4O1xyXG4gICAgd2lkdGg6IDUwJTtcclxuICAgIGFsaWduLXNlbGY6IHN0YXJ0O1xyXG4gICAgbWFyZ2luLWJvdHRvbTogdmFyKC0tc3BhY2luZyk7XHJcbn1cclxuXHJcbi5ibG9nX19ibG9nIHAge1xyXG4gICAgcGFkZGluZy10b3A6IHZhcigtLXNwYWNpbmcpO1xyXG59XHJcblxyXG4uYmxvZ19faGVhZGVyX19jb250YWluZXIge1xyXG4gICAgZGlzcGxheTogZmxleDtcclxuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxufVxyXG5cclxuLmJsb2dfX2hlYWRlciB7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xyXG4gICAgd2lkdGg6IDUwJTtcclxufVxyXG5cclxuLmJsb2dfX2FkZF9jb21tZW50IHtcclxuICAgIHRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lO1xyXG4gICAgY3Vyc29yOiBwb2ludGVyO1xyXG4gICAgdXNlci1zZWxlY3Q6IG5vbmU7XHJcbn1cclxuXHJcbi5ibG9nX19mb3JtX19jb250YWluZXIge1xyXG4gICAgZGlzcGxheTogZmxleDtcclxuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XHJcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XHJcbn1cclxuXHJcbi5ibG9nX19mb3JtIHtcclxuICAgIG1hcmdpbi10b3A6IHZhcigtLXNwYWNpbmcpO1xyXG4gICAgZGlzcGxheTogZmxleDtcclxuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XHJcbiAgICB3aWR0aDogNTAlO1xyXG4gICAgZ2FwOiB2YXIoLS1zcGFjaW5nKTtcclxufVxyXG5cclxuLmJsb2dfX2Zvcm0gdGV4dGFyZWEge1xyXG4gICAgcmVzaXplOiBub25lO1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbiAgICBoZWlnaHQ6IDEwMHB4O1xyXG4gICAgcGFkZGluZzogNXB4O1xyXG59XHJcblxyXG4uYmxvZ19fZm9ybSBpbnB1dCB7XHJcbiAgICBwYWRkaW5nOiAzcHg7XHJcbiAgICBib3JkZXI6IG5vbmU7XHJcbiAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgYmxhY2s7XHJcbn1cclxuXHJcbi5ibG9nX19mb3JtX19idXR0b24ge1xyXG4gICAgZm9udC1zaXplOiAxLjE1ZW07XHJcbiAgICBwYWRkaW5nOiBjYWxjKHZhcigtLXNwYWNpbmcpIC8gMik7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcclxuICAgIGZvbnQtZmFtaWx5OiAnSW5jb25zb2xhdGEnLCBzYW5zLXNlcmlmO1xyXG4gICAgZm9udC13ZWlnaHQ6IDYwMDtcclxuICAgIGxldHRlci1zcGFjaW5nOiAxcHg7XHJcbn1cclxuXHJcbi5ibG9nX19mb3JtX19idXR0b246ZGlzYWJsZWQge1xyXG4gICAgZm9udC1zaXplOiAxLjE1ZW07XHJcbiAgICBwYWRkaW5nOiBjYWxjKHZhcigtLXNwYWNpbmcpIC8gMik7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcclxuICAgIGZvbnQtZmFtaWx5OiAnSW5jb25zb2xhdGEnLCBzYW5zLXNlcmlmO1xyXG4gICAgZm9udC13ZWlnaHQ6IDYwMDtcclxuICAgIGxldHRlci1zcGFjaW5nOiAxcHg7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiBsaWdodGdyYXk7XHJcbn1cclxuXHJcbi5ibG9nX19jb21tZW50c19fY29udGFpbmVyIHtcclxuICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxuICAgIG1hcmdpbi10b3A6IHZhcigtLXNwYWNpbmcpO1xyXG59XHJcbiJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n});","map":{"version":3,"mappings":"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","names":["Subscription","i0","BlogViewComponent","constructor","route","blogsService","authService","content","postedBy","userSubscription","ngOnInit","blogId","snapshot","paramMap","get","getBlog","subscribe","blog","console","log","getComments","comment","comments","user$","setPostedBy","user","getUser","formData","onFormChange","event","name","value","target","trim","toggleForm","showForm","submitComment","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\aaron\\Desktop\\angular-blog\\src\\app\\pages\\blog-view\\blog-view.component.ts","C:\\Users\\aaron\\Desktop\\angular-blog\\src\\app\\pages\\blog-view\\blog-view.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { BlogsService } from '../../services/blogs.service';\nimport { Blog } from 'src/app/Blog';\nimport { Subscription } from 'rxjs'\nimport { AuthService } from 'src/app/services/auth-service.service';\nimport { Comment } from 'src/app/Comment';\n\n@Component({\n  selector: 'app-blog-view',\n  templateUrl: './blog-view.component.html',\n  styleUrls: ['./blog-view.component.css']\n})\n\nexport class BlogViewComponent implements OnInit {\n  showForm: boolean = false;\n  blogId: string = '';\n  private userSubscription: Subscription;\n  blog: Blog | undefined;\n  comments: Comment[] = [];\n  formData = {\n    content: '',\n    postedBy: '',\n  }\n\n  constructor(private route: ActivatedRoute, private blogsService: BlogsService, private authService: AuthService) {\n    this.userSubscription = new Subscription();\n  }\n  \n  ngOnInit(): void {\n    const blogId = this.route.snapshot.paramMap.get('blogId') ?? '';\n    if (blogId) {\n      this.blogId = blogId;\n      this.blogsService.getBlog(blogId).subscribe((blog: Blog) => {\n        console.log(blog);\n        this.blog = blog;\n      });\n      this.blogsService.getComments(blogId).subscribe((comment) => {\n        this.comments = comment;\n      });\n    }\n\n    this.userSubscription = this.authService.user$.subscribe(() => {          \n      this.setPostedBy();\n    });\n  }\n\n  setPostedBy() {\n    const user = this.authService.getUser();\n    if (user) {\n      return this.formData.postedBy = user;\n    }\n\n    return;\n  }\n\n  onFormChange(event: any) {\n    const { name, value } = event.target;\n    if (name in this.formData) {\n      this.formData = { ...this.formData, [name]: value.trim() };\n    }\n  }\n\n  toggleForm() {\n    this.showForm = !this.showForm;\n  }\n\n  submitComment() {    \n    console.log('hit');\n    \n    this.blogsService.submitComment(this.formData, this.blogId).subscribe((blog) => {\n      console.log(blog);\n    });\n  }\n}\n","<div class=\"blog_view__container\">\r\n    <div class=\"blog__blog\">\r\n        <h2>{{ blog!.title }}</h2>\r\n        <div>Posted by: {{ blog!.postedBy }}</div>\r\n        <div>{{ blog!.createdAt }}</div>\r\n        <p>{{ blog!.content }}</p>\r\n    </div>\r\n</div>\r\n\r\n<div class=\"blog__header__container\">\r\n    <div class=\"blog__header\">\r\n        <span>Comments</span>\r\n        <span class=\"blog__add_comment\" (click)=\"toggleForm()\">Add a comment</span>\r\n    </div>\r\n</div>\r\n\r\n<div *ngIf=\"showForm\" class=\"blog__form__container\">\r\n    <form class=\"blog__form\" (ngSubmit)=\"submitComment()\">\r\n        <label for=\"postedBy\">\r\n            Alias:\r\n            <input type=\"text\" name=\"postedBy\" id=\"postedBy\" class=\"blogpostform__titleInput\" [value]=\"formData.postedBy\" (change)=\"onFormChange($event)\" maxlength=\"25\" required disabled>\r\n        </label>\r\n        <textarea name=\"content\" id=\"content\" class=\"blogpostform__textInput\" placeholder=\"Your blog's text...\" (change)=\"onFormChange($event)\" maxlength=\"500\" required></textarea>\r\n        <button class=\"blog__form__button\" type=\"submit\"\r\n            [disabled]=\"!formData.postedBy\" [title]=\"formData.postedBy === '' ? 'Please sign in on the main page to leave a comment.' : ''\">\r\n            Submit Comment\r\n        </button>\r\n    </form>\r\n</div>\r\n\r\n<div class=\"blog__comments__container\">\r\n    <div class=\"blog__commentItem\">\r\n        <div class=\"blog__blog\" *ngFor=\"let comment of comments\">\r\n            <div>Posted by: {{ comment!.postedBy }}</div>\r\n            <div>{{ comment!.createdAt }}</div>\r\n            <p>{{ comment!.content }}</p>\r\n        </div>\r\n    </div>\r\n</div>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}