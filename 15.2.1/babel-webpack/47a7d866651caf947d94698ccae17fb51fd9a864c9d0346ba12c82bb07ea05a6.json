{"ast":null,"code":"import { Subscription } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../../services/blogs.service\";\nimport * as i3 from \"src/app/services/auth-service.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\nimport * as i6 from \"@angular/material/icon\";\nfunction BlogViewComponent_div_22_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 9)(1, \"form\", 10);\n    i0.ɵɵlistener(\"ngSubmit\", function BlogViewComponent_div_22_Template_form_ngSubmit_1_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.submitComment());\n    });\n    i0.ɵɵelementStart(2, \"label\", 11);\n    i0.ɵɵtext(3, \" Alias: \");\n    i0.ɵɵelementStart(4, \"input\", 12);\n    i0.ɵɵlistener(\"change\", function BlogViewComponent_div_22_Template_input_change_4_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.onFormChange($event));\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"textarea\", 13);\n    i0.ɵɵlistener(\"change\", function BlogViewComponent_div_22_Template_textarea_change_5_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.onFormChange($event));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"button\", 14);\n    i0.ɵɵtext(7, \" Submit Comment \");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"value\", ctx_r0.formData.postedBy);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabled\", !ctx_r0.formData.postedBy)(\"title\", ctx_r0.formData.postedBy === \"\" ? \"Please sign in on the main page to leave a comment.\" : \"\");\n  }\n}\nfunction BlogViewComponent_div_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 15)(1, \"div\", 4)(2, \"div\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"p\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const comment_r6 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"Posted by: \", comment_r6.postedBy, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(comment_r6.createdAt);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(comment_r6.content);\n  }\n}\nexport class BlogViewComponent {\n  constructor(route, blogsService, authService) {\n    this.route = route;\n    this.blogsService = blogsService;\n    this.authService = authService;\n    this.showForm = false;\n    this.blogId = '';\n    this.comments = [];\n    this.formData = {\n      content: '',\n      postedBy: ''\n    };\n    this.userSubscription = new Subscription();\n  }\n  ngOnInit() {\n    const blogId = this.route.snapshot.paramMap.get('blogId') ?? '';\n    if (blogId) {\n      this.blogId = blogId;\n      this.blogsService.getBlog(blogId).subscribe(blog => {\n        console.log(blog);\n        this.blog = blog;\n      });\n      this.blogsService.getComments(blogId).subscribe(comment => {\n        this.comments = comment;\n      });\n    }\n    this.userSubscription = this.authService.user$.subscribe(() => {\n      this.setPostedBy();\n    });\n  }\n  setPostedBy() {\n    const user = this.authService.getUser();\n    if (user) {\n      return this.formData.postedBy = user;\n    }\n    return;\n  }\n  onFormChange(event) {\n    const {\n      name,\n      value\n    } = event.target;\n    if (name in this.formData) {\n      this.formData = {\n        ...this.formData,\n        [name]: value.trim()\n      };\n    }\n  }\n  toggleForm() {\n    this.showForm = !this.showForm;\n  }\n  submitComment() {\n    console.log('hit');\n    this.blogsService.submitComment(this.formData, this.blogId).subscribe(blog => {\n      console.log(blog);\n    });\n  }\n}\nBlogViewComponent.ɵfac = function BlogViewComponent_Factory(t) {\n  return new (t || BlogViewComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.BlogsService), i0.ɵɵdirectiveInject(i3.AuthService));\n};\nBlogViewComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: BlogViewComponent,\n  selectors: [[\"app-blog-view\"]],\n  decls: 24,\n  vars: 6,\n  consts: [[1, \"blog__header__container\"], [1, \"blog_view__back__button__container\"], [\"type\", \"button\", 1, \"blog__form__button\"], [1, \"blog_view__container\"], [1, \"blog__blog\"], [1, \"blog__header\"], [1, \"blog__add_comment\", 3, \"click\"], [\"class\", \"blog__form__container\", 4, \"ngIf\"], [\"class\", \"blog__comments__container\", 4, \"ngFor\", \"ngForOf\"], [1, \"blog__form__container\"], [1, \"blog__form\", 3, \"ngSubmit\"], [\"for\", \"postedBy\"], [\"type\", \"text\", \"name\", \"postedBy\", \"id\", \"postedBy\", \"maxlength\", \"25\", \"required\", \"\", \"disabled\", \"\", 1, \"blogpostform__titleInput\", 3, \"value\", \"change\"], [\"name\", \"content\", \"id\", \"content\", \"placeholder\", \"Your blog's text...\", \"maxlength\", \"500\", \"required\", \"\", 1, \"blogpostform__textInput\", 3, \"change\"], [\"type\", \"submit\", 1, \"blog__form__button\", 3, \"disabled\", \"title\"], [1, \"blog__comments__container\"]],\n  template: function BlogViewComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"button\", 2)(3, \"mat-icon\");\n      i0.ɵɵtext(4, \"keyboard_backspace\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(5, \" Home \");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(6, \"div\", 3)(7, \"div\", 4)(8, \"h2\");\n      i0.ɵɵtext(9);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(10, \"div\");\n      i0.ɵɵtext(11);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(12, \"div\");\n      i0.ɵɵtext(13);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(14, \"p\");\n      i0.ɵɵtext(15);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(16, \"div\", 0)(17, \"div\", 5)(18, \"span\");\n      i0.ɵɵtext(19, \"Comments\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(20, \"span\", 6);\n      i0.ɵɵlistener(\"click\", function BlogViewComponent_Template_span_click_20_listener() {\n        return ctx.toggleForm();\n      });\n      i0.ɵɵtext(21, \"Add a comment\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵtemplate(22, BlogViewComponent_div_22_Template, 8, 3, \"div\", 7);\n      i0.ɵɵtemplate(23, BlogViewComponent_div_23_Template, 8, 3, \"div\", 8);\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(9);\n      i0.ɵɵtextInterpolate(ctx.blog.title);\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate1(\"Posted by: \", ctx.blog.postedBy, \"\");\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate(ctx.blog.createdAt);\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate(ctx.blog.content);\n      i0.ɵɵadvance(7);\n      i0.ɵɵproperty(\"ngIf\", ctx.showForm);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngForOf\", ctx.comments);\n    }\n  },\n  dependencies: [i4.NgForOf, i4.NgIf, i5.ɵNgNoValidate, i5.NgControlStatusGroup, i5.NgForm, i6.MatIcon],\n  styles: [\"var[_ngcontent-%COMP%]   resource[_ngcontent-%COMP%];\\n (()[_ngcontent-%COMP%]   =[_ngcontent-%COMP%] >  { // webpackBootstrap\\n \\tvar __webpack_modules__ = ({\\n\\n 811:\\n\\n (() => {\\n\\nthrow new Error(\\\"Module build failed (from ./node_modules/postcss-loader/dist/cjs.js):\\\\nSyntaxError\\\\n\\\\n(16:5) C:\\\\\\\\Users\\\\\\\\aaron\\\\\\\\Desktop\\\\\\\\angular-blog\\\\\\\\src\\\\\\\\app\\\\\\\\pages\\\\\\\\blog-view\\\\\\\\blog-view.component.css Unknown word\\\\n\\\\n \\\\u001b[90m 14 | \\\\u001b[39m\\\\n \\\\u001b[90m 15 | \\\\u001b[39m\\\\u001b[33m.align\\\\u001b[39m \\\\u001b[33m{\\\\u001b[39m\\\\n\\\\u001b[1m\\\\u001b[31m>\\\\u001b[39m\\\\u001b[22m\\\\u001b[90m 16 | \\\\u001b[39m    displ\\\\u001b[33m;\\\\u001b[39m\\\\n \\\\u001b[90m    | \\\\u001b[39m    \\\\u001b[1m\\\\u001b[31m^\\\\u001b[39m\\\\u001b[22m\\\\n \\\\u001b[90m 17 | \\\\u001b[39m\\\\u001b[33m}\\\\u001b[39m\\\\n \\\\u001b[90m 18 | \\\\u001b[39m\\\\n\\\");\\n\\n })\\n\\n \\t});\\n\\n \\t\\n \\t// startup\\n \\t// Load entry module and return exports\\n \\t// This entry module doesn't tell about it's top-level declarations so it can't be inlined\\n \\tvar __webpack_exports__ = {};\\n \\t__webpack_modules__[811]();\\n \\tresource = __webpack_exports__;\\n \\t\\n })()\\n;\\n/*# sourceMappingURL=blog-view.component.css.map*/\"]\n});","map":{"version":3,"mappings":"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","names":["Subscription","i0","BlogViewComponent","constructor","route","blogsService","authService","content","postedBy","userSubscription","ngOnInit","blogId","snapshot","paramMap","get","getBlog","subscribe","blog","console","log","getComments","comment","comments","user$","setPostedBy","user","getUser","formData","onFormChange","event","name","value","target","trim","toggleForm","showForm","submitComment","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\aaron\\Desktop\\angular-blog\\src\\app\\pages\\blog-view\\blog-view.component.ts","C:\\Users\\aaron\\Desktop\\angular-blog\\src\\app\\pages\\blog-view\\blog-view.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { BlogsService } from '../../services/blogs.service';\nimport { Blog } from 'src/app/Blog';\nimport { Subscription } from 'rxjs'\nimport { AuthService } from 'src/app/services/auth-service.service';\nimport { Comment } from 'src/app/Comment';\n\n@Component({\n  selector: 'app-blog-view',\n  templateUrl: './blog-view.component.html',\n  styleUrls: ['./blog-view.component.css']\n})\n\nexport class BlogViewComponent implements OnInit {\n  showForm: boolean = false;\n  blogId: string = '';\n  private userSubscription: Subscription;\n  blog: Blog | undefined;\n  comments: Comment[] = [];\n  formData = {\n    content: '',\n    postedBy: '',\n  }\n\n  constructor(private route: ActivatedRoute, private blogsService: BlogsService, private authService: AuthService) {\n    this.userSubscription = new Subscription();\n  }\n  \n  ngOnInit(): void {\n    const blogId = this.route.snapshot.paramMap.get('blogId') ?? '';\n    if (blogId) {\n      this.blogId = blogId;\n      this.blogsService.getBlog(blogId).subscribe((blog: Blog) => {\n        console.log(blog);\n        this.blog = blog;\n      });\n      this.blogsService.getComments(blogId).subscribe((comment) => {\n        this.comments = comment;\n      });\n    }\n\n    this.userSubscription = this.authService.user$.subscribe(() => {          \n      this.setPostedBy();\n    });\n  }\n\n  setPostedBy() {\n    const user = this.authService.getUser();\n    if (user) {\n      return this.formData.postedBy = user;\n    }\n\n    return;\n  }\n\n  onFormChange(event: any) {\n    const { name, value } = event.target;\n    if (name in this.formData) {\n      this.formData = { ...this.formData, [name]: value.trim() };\n    }\n  }\n\n  toggleForm() {\n    this.showForm = !this.showForm;\n  }\n\n  submitComment() {    \n    console.log('hit');\n    \n    this.blogsService.submitComment(this.formData, this.blogId).subscribe((blog) => {\n      console.log(blog);\n    });\n  }\n}\n","<div class='blog__header__container'>\r\n    <div class=\"blog_view__back__button__container\">\r\n        <button type=\"button\" class=\"blog__form__button\">\r\n            <mat-icon>keyboard_backspace</mat-icon> Home\r\n        </button>\r\n    </div>\r\n</div>\r\n\r\n<div class=\"blog_view__container\">\r\n    <div class=\"blog__blog\">\r\n        <h2>{{ blog!.title }}</h2>\r\n        <div>Posted by: {{ blog!.postedBy }}</div>\r\n        <div>{{ blog!.createdAt }}</div>\r\n        <p>{{ blog!.content }}</p>\r\n    </div>\r\n</div>\r\n\r\n<div class=\"blog__header__container\">\r\n    <div class=\"blog__header\">\r\n        <span>Comments</span>\r\n        <span class=\"blog__add_comment\" (click)=\"toggleForm()\">Add a comment</span>\r\n    </div>\r\n</div>\r\n\r\n<div *ngIf=\"showForm\" class=\"blog__form__container\">\r\n    <form class=\"blog__form\" (ngSubmit)=\"submitComment()\">\r\n        <label for=\"postedBy\">\r\n            Alias:\r\n            <input type=\"text\" name=\"postedBy\" id=\"postedBy\" class=\"blogpostform__titleInput\" [value]=\"formData.postedBy\" (change)=\"onFormChange($event)\" maxlength=\"25\" required disabled>\r\n        </label>\r\n        <textarea name=\"content\" id=\"content\" class=\"blogpostform__textInput\" placeholder=\"Your blog's text...\" (change)=\"onFormChange($event)\" maxlength=\"500\" required></textarea>\r\n        <button class=\"blog__form__button\" type=\"submit\"\r\n            [disabled]=\"!formData.postedBy\" [title]=\"formData.postedBy === '' ? 'Please sign in on the main page to leave a comment.' : ''\">\r\n            Submit Comment\r\n        </button>\r\n    </form>\r\n</div>\r\n\r\n<div class=\"blog__comments__container\" *ngFor=\"let comment of comments\">\r\n    <div class=\"blog__blog\">\r\n        <div>Posted by: {{ comment!.postedBy }}</div>\r\n        <div>{{ comment!.createdAt }}</div>\r\n        <p>{{ comment!.content }}</p>\r\n    </div>\r\n</div>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}